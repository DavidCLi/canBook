(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-581a07c2"],{"13d5":function(t,a,i){"use strict";var n=i("23e7"),o=i("d58f").left,s=i("b301");n({target:"Array",proto:!0,forced:s("reduce")},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},8418:function(t,a,i){"use strict";var n=i("c04e"),o=i("9bf2"),s=i("5c6c");t.exports=function(t,a,i){var e=n(a);e in t?o.f(t,e,s(0,i)):t[e]=i}},"8ae4":function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("nav",{attrs:{"aria-label":"Page navigation example"}},[i("ul",{staticClass:"pagination"},[i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.pageComponent(t.pagination.current_page-1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(a,n){return i("li",{key:n,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[i("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.pageComponent(a)}}},[t._v(t._s(a))])])})),i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.pageComponent(t.pagination.current_page+1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},o=[],s={name:"Pagination",props:["pagination"],methods:{pageComponent:function(t){this.$emit("emitPage",t)}}},e=s,r=i("2877"),c=Object(r["a"])(e,n,o,!1,null,null,null);a["a"]=c.exports},"99af":function(t,a,i){"use strict";var n=i("23e7"),o=i("d039"),s=i("e8b5"),e=i("861d"),r=i("7b0b"),c=i("50c4"),l=i("8418"),p=i("65f0"),u=i("1dde"),d=i("b622"),f=d("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",v=!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),C=u("concat"),_=function(t){if(!e(t))return!1;var a=t[f];return void 0!==a?!!a:s(t)},S=!v||!C;n({target:"Array",proto:!0,forced:S},{concat:function(t){var a,i,n,o,s,e=r(this),u=p(e,0),d=0;for(a=-1,n=arguments.length;a<n;a++)if(s=-1===a?e:arguments[a],_(s)){if(o=c(s.length),d+o>h)throw TypeError(g);for(i=0;i<o;i++,d++)i in s&&l(u,d,s[i])}else{if(d>=h)throw TypeError(g);l(u,d++,s)}return u.length=d,u}})},a434:function(t,a,i){"use strict";var n=i("23e7"),o=i("23cb"),s=i("a691"),e=i("50c4"),r=i("7b0b"),c=i("65f0"),l=i("8418"),p=i("1dde"),u=Math.max,d=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p("splice")},{splice:function(t,a){var i,n,p,g,v,C,_=r(this),S=e(_.length),m=o(t,S),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=S-m):(i=y-2,n=d(u(s(a),0),S-m)),S+i-n>f)throw TypeError(h);for(p=c(_,n),g=0;g<n;g++)v=m+g,v in _&&l(p,g,_[v]);if(p.length=n,i<n){for(g=m;g<S-n;g++)v=g+n,C=g+i,v in _?_[C]=_[v]:delete _[C];for(g=S;g>S-n+i;g--)delete _[g-1]}else if(i>n)for(g=S-n;g>m;g--)v=g+n-1,C=g+i-1,v in _?_[C]=_[v]:delete _[C];for(g=0;g<i;g++)_[g+m]=arguments[g+2];return _.length=S-n+i,p}})},a98f:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container"},[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),i("div",{staticClass:"row shopPaddingTop"},[i("div",{staticClass:"classificationAndCart"},[i("div",{staticClass:"booksClassification"},[i("strong",[t._v("書籍類別")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.classification,expression:"classification"}],staticClass:"classificationStyle",on:{click:function(a){return a.preventDefault(),t.bookFilter(a)},change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.classification=a.target.multiple?i:i[0]}}},[i("option",{staticClass:"classificationStyle",attrs:{value:"全部好書"}},[t._v("全部好書")]),t._l(t.allCategoryFilter,(function(a,n){return i("option",{key:n,staticClass:"classificationStyle",domProps:{value:a}},[t._v(t._s(a))])}))],2),i("i",{staticClass:"fas fa-caret-down classificationIcon"})])]),i("div",{staticClass:"totalBooks"},[i("div",{staticClass:"totalBooksTitle"},[t._v(t._s(t.classification))]),t._l(t.totalBooks,(function(a,n){return i("div",{key:n,staticClass:"col-4 totalBooksCard",attrs:{id:"aBook"}},[i("div",{staticClass:"cardBox",on:{click:function(i){return i.preventDefault(),t.seeMore(a.id)}}},[i("img",{attrs:{src:a.imageUrl,alt:""}})]),i("div",{staticClass:"totalBooksCardFontStyle"},[i("strong",[t._v(t._s(a.title))]),i("span",[t._v("NT$: "+t._s(a.price))])])])})),"全部好書"===t.classification?i("Pagination",{attrs:{pagination:t.pagination},on:{emitPage:t.getShop}}):t._e()],2)]),i("div",{staticClass:"shoppingCartIcon",on:{click:t.sideBarOpen}},[i("i",{staticClass:"fas fa-shopping-cart"}),t.totalShoppingList.carts.length>0?i("div",{staticClass:"shoppingCartQty"},[t._v(t._s(t.totalShoppingList.carts.length))]):t._e()]),t.totalShoppingList.carts.length>0?i("div",{staticClass:"shoppingSideBar"},[i("div",{staticClass:"shoppingSideBarTitle"},[i("span",[t._v("購物車內容")]),i("i",{staticClass:"fas fa-times",on:{click:t.sideBarClose}})]),i("div",{staticClass:"shoppingSideBarContent"},[t._l(t.totalShoppingList.carts,(function(a,n){return i("div",{key:n,staticClass:"shoppingSideBarList"},[i("span",{staticClass:"shoppingSideBarDataDel",on:{click:function(a){return a.preventDefault(),t.delShoppingCartList(n)}}},[t._v("X")]),i("img",{attrs:{src:a.product.imageUrl,alt:""}}),i("div",{staticClass:"shoppingSideBarData"},[i("p",[t._v(t._s(a.product.title))]),i("span",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),i("span",[t._v("NT"+t._s(t._f("currency")(a.product.price*a.qty)))])])])})),i("div",{staticClass:"shoppingSideBarTotal"},[i("p",[t._v("小計: NT"+t._s(t._f("currency")(t.total)))]),i("button",{staticClass:"delAllBtn",on:{click:function(a){return a.preventDefault(),t.delAllShoppingCartList(a)}}},[t._v("清除購物車")])])],2),i("button",{staticClass:"shoppingSideBarGetOrderBtn btn",on:{click:function(a){return a.preventDefault(),t.postCart(a)}}},[t._v(" 下單去 "),i("i",{staticClass:"fas fa-arrow-right"})])]):i("div",{staticClass:"shoppingSideBar"},[i("div",{staticClass:"shoppingSideBarTitle"},[i("span",[t._v("購物車內容")]),i("i",{staticClass:"fas fa-times",on:{click:t.sideBarClose}})]),i("div",{staticClass:"shoppingSideBarZero"},[t._v("購物車目前是空的! 快去商場逛逛吧~")])])],1)},o=[],s=(i("99af"),i("4de4"),i("c975"),i("d81d"),i("13d5"),i("a434"),i("1157")),e=i.n(s),r=i("8ae4"),c={components:{Pagination:r["a"]},data:function(){return{totalBooks:[],totalBooksAll:[],pagination:{},isLoading:!1,shopId:"",totalShoppingList:{carts:{}},coupon_code:"",classification:"全部好書",allCategory:[],allCategoryFilter:[]}},computed:{total:function(){return sessionStorage.setItem("cart",JSON.stringify(this.totalShoppingList.carts)),this.totalShoppingList.carts.reduce((function(t,a){return t+a.product.price*a.qty}),0)}},methods:{getShop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/products?page=").concat(t);a.$http.get(i).then((function(t){a.totalBooks=t.data.products,a.pagination=t.data.pagination}))},getAllShop:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/products/all");t.$http.get(a).then((function(a){t.totalBooksAll=a.data;var i=a.data.products;t.allCategory=i.map((function(t){return t.category})),t.allCategoryFilter=t.allCategory.filter((function(t,a,i){return i.indexOf(t)===a}))}))},seeMore:function(t){var a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/product/").concat(t);a.shopId=t,a.isLoading=!0,a.$http.get(i).then((function(t){t.data.success&&a.$router.push("shop/".concat(a.shopId)),a.isLoading=!1}))},ShoppingCartList:function(){var t=this;"".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart");t.totalShoppingList.carts=JSON.parse(sessionStorage.getItem("cart"))||[]},delShoppingCartList:function(t){var a=this;a.isLoading=!0,a.totalShoppingList.carts.splice(t,1),sessionStorage.setItem("cart",JSON.stringify(a.totalShoppingList.carts)),a.isLoading=!1,a.$bus.$emit("message:push","刪除成功","danger")},useCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/coupon"),i={code:t.coupon_code};t.$http.post(a,{data:i}).then()},bookFilter:function(){var t=this;if("全部好書"===t.classification)t.getShop();else{var a=t.totalBooksAll.products;t.totalBooks=a.filter((function(a){return t.classification===a.category}))}},delAllShoppingCartList:function(){this.totalShoppingList.carts=[],sessionStorage.setItem("cart",JSON.stringify(this.totalShoppingList.carts))},postCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart");t.isLoading=!0,t.$http.all(t.totalShoppingList.carts.map((function(i){var n={product_id:i.product.id,qty:i.qty};return t.$http.post(a,{data:n})}))).then((function(){t.isLoading=!1,t.$router.push("/cart")}))},sideBarOpen:function(){e()(".shoppingSideBar").css({display:"inline-block"}).animate({right:"0%"},100),e()("body").css("overflow-y","hidden")},sideBarClose:function(){e()(".shoppingSideBar").css({display:"none"}),e()("body").css("overflow-y","")}},created:function(){this.getShop(),this.ShoppingCartList(),this.getAllShop()}},l=c,p=i("2877"),u=Object(p["a"])(l,n,o,!1,null,null,null);a["default"]=u.exports},b301:function(t,a,i){"use strict";var n=i("d039");t.exports=function(t,a){var i=[][t];return!i||!n((function(){i.call(null,a||function(){throw 1},1)}))}},c975:function(t,a,i){"use strict";var n=i("23e7"),o=i("4d64").indexOf,s=i("b301"),e=[].indexOf,r=!!e&&1/[1].indexOf(1,-0)<0,c=s("indexOf");n({target:"Array",proto:!0,forced:r||c},{indexOf:function(t){return r?e.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},d58f:function(t,a,i){var n=i("1c0b"),o=i("7b0b"),s=i("44ad"),e=i("50c4"),r=function(t){return function(a,i,r,c){n(i);var l=o(a),p=s(l),u=e(l.length),d=t?u-1:0,f=t?-1:1;if(r<2)while(1){if(d in p){c=p[d],d+=f;break}if(d+=f,t?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:u>d;d+=f)d in p&&(c=i(c,p[d],d,l));return c}};t.exports={left:r(!1),right:r(!0)}},d81d:function(t,a,i){"use strict";var n=i("23e7"),o=i("b727").map,s=i("1dde");n({target:"Array",proto:!0,forced:!s("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-581a07c2.16776856.js.map