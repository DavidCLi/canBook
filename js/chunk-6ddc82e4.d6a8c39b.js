(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ddc82e4"],{"159b":function(t,e,a){var s=a("da84"),r=a("fdbc"),o=a("17c2"),i=a("9112");for(var n in r){var c=s[n],l=c&&c.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,r=a("b301");t.exports=r("forEach")?function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"3ca3":function(t,e,a){"use strict";var s=a("6547").charAt,r=a("69f3"),o=a("7dd0"),i="String Iterator",n=r.set,c=r.getterFor(i);o(String,"String",(function(t){n(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,r=e.index;return r>=a.length?{value:void 0,done:!0}:(t=s(a,r),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,a){"use strict";var s=a("23e7"),r=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},5388:function(t,e,a){},8418:function(t,e,a){"use strict";var s=a("c04e"),r=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var i=s(e);i in t?r.f(t,i,o(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var s=a("23e7"),r=a("d039"),o=a("e8b5"),i=a("861d"),n=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),p=a("1dde"),d=a("b622"),f=d("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",h=!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),g=p("concat"),_=function(t){if(!i(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},L=!h||!g;s({target:"Array",proto:!0,forced:L},{concat:function(t){var e,a,s,r,o,i=n(this),p=u(i,0),d=0;for(e=-1,s=arguments.length;e<s;e++)if(o=-1===e?i:arguments[e],_(o)){if(r=c(o.length),d+r>m)throw TypeError(v);for(a=0;a<r;a++,d++)a in o&&l(p,d,o[a])}else{if(d>=m)throw TypeError(v);l(p,d++,o)}return p.length=d,p}})},a434:function(t,e,a){"use strict";var s=a("23e7"),r=a("23cb"),o=a("a691"),i=a("50c4"),n=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),p=Math.max,d=Math.min,f=9007199254740991,m="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!u("splice")},{splice:function(t,e){var a,s,u,v,h,g,_=n(this),L=i(_.length),C=r(t,L),b=arguments.length;if(0===b?a=s=0:1===b?(a=0,s=L-C):(a=b-2,s=d(p(o(e),0),L-C)),L+a-s>f)throw TypeError(m);for(u=c(_,s),v=0;v<s;v++)h=C+v,h in _&&l(u,v,_[h]);if(u.length=s,a<s){for(v=C;v<L-s;v++)h=v+s,g=v+a,h in _?_[g]=_[h]:delete _[g];for(v=L;v>L-s+a;v--)delete _[v-1]}else if(a>s)for(v=L-s;v>C;v--)h=v+s-1,g=v+a-1,h in _?_[g]=_[h]:delete _[g];for(v=0;v<a;v++)_[v+C]=arguments[v+2];return _.length=L-s+a,u}})},b301:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!a||!s((function(){a.call(null,e||function(){throw 1},1)}))}},b7a4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row shopPaddingTop"},[t._m(0),a("div",{staticClass:"col-12 cartData"},[a("div",{staticClass:"orderData col-8"},[a("p",{staticClass:"orderTitle"},[t._v("訂單資訊")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.sendOrder(e)}}},[a("div",{staticClass:"form-group"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid ":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),a("div",{staticClass:"form-group"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"phone",expression:"'phone'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",name:"tel",id:"usertel",placeholder:"請輸入手機"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v(t._s("手機"+t.errors.first("tel")))]):t._e()]),a("div",{staticClass:"form-group"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("請輸入收件人地址")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(5)])]),a("div",{staticClass:"shoppingCartList col-4"},[a("div",{staticClass:"shoppingCartListTitle"},[a("strong",[t._v("購物車清單")]),0!==t.totalShoppingList.carts.length?a("div",{staticClass:"countRound"},[t._v(t._s(t.totalShoppingList.carts.length))]):t._e(),0===t.totalShoppingList.carts.length?a("div",{staticClass:"countRound"},[t._v("0")]):t._e(),a("button",{staticClass:"btn btn-prompt",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.delAllShoppingCartList(e)}}},[t._v("清空購物車")])]),t.totalShoppingList.total===t.totalShoppingList.final_total?a("div",{staticClass:"lumpSum"},[a("strong",[t._v("小計")]),a("span",[t._v("NT: "+t._s(t.totalShoppingList.total))])]):t._e(),t.totalShoppingList.total!==t.totalShoppingList.final_total?a("div",{staticClass:"lumpSum"},[a("strong",[t._v("折扣後小計")]),a("span",[t._v("NT: "+t._s(Math.round(t.totalShoppingList.final_total)))])]):t._e(),t._l(t.totalShoppingList.carts,(function(e,s){return a("div",{key:s,staticClass:"shoppingCartContent"},[a("button",{staticClass:"btn btn-prompt",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.delShopingCartList(e.id,s)}}},[a("i",{staticClass:"fas fa-trash-alt"})]),a("div",{staticClass:"w-60"},[a("p",[t._v(t._s(e.product.title))]),a("p",[t._v("數量: "+t._s(e.qty))])]),a("span",[t._v("NT$: "+t._s(e.product.price*e.qty))])])})),a("div",{staticClass:"enterCoupon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼",name:"coupon"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append",on:{click:function(e){return e.preventDefault(),t.useCoupon(e)}}},[a("button",{staticClass:"btn",attrs:{type:"button",id:"button-addon2"}},[t._v("送出")])])])],2)])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scheduleShow col-8"},[a("ul",[a("li",[a("p",[t._v("1.填寫訂購資料")])]),a("li",[a("p",[t._v("2.付款確認")])]),a("li",[a("p",[t._v("3.完成訂單")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"useremail"}},[t._v(" Email "),a("span",[t._v("*必填")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v(" 收件人姓名 "),a("span",[t._v("*必填")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v(" 收件人手機 "),a("span",[t._v("*必填")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v(" 收件人地址 "),a("span",[t._v("*必填")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary"},[t._v("送出訂單")])])}],o=(a("99af"),a("4160"),a("d81d"),a("a434"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("1157")),i=a.n(o),n={data:function(){return{isLoading:!1,totalShoppingList:{carts:{}},form:{user:{name:"",email:"",tel:"",address:""},message:""},cartId:"",coupon_code:""}},methods:{getShoppingCartList:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart");t.isLoading=!0,t.$http.get(e).then((function(e){t.totalShoppingList=e.data.data,t.isLoading=!1}))},sendOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/order"),a=t.form;t.$validator.validate().then((function(s){s&&(t.totalShoppingList.carts.length>=1?t.$http.post(e,{data:a}).then((function(e){e.data.success&&(t.cartId=e.data.orderId,t.$router.push("cart/".concat(t.cartId)))})):t.$bus.$emit("message:push","購物車沒有商品喔 快去商店看看吧~","primary"))}))},delShopingCartList:function(t,e){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart/").concat(t);a.isLoading=!0,a.$http.delete(s).then((function(t){a.getShoppingCartList(),a.totalShoppingList.carts.splice(e,1),sessionStorage.setItem("cart",JSON.stringify(a.totalShoppingList.carts)),a.isLoading=!1,t.data.success&&a.$bus.$emit("message:push",t.data.message,"danger")}))},delAllShoppingCartList:function(){var t=this,e=t.totalShoppingList.carts;t.totalShoppingList.carts=[],sessionStorage.setItem("cart",JSON.stringify(t.totalShoppingList.carts));var a=[];t.isLoading=!0,e.forEach((function(t){a.push(t.id)}));var s=[];a.forEach((function(e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart/").concat(e);s.push(t.$http.delete(a).then())})),Promise.all(s).then((function(){t.isLoading=!1,t.getShoppingCartList(),!1===t.isLoading&&t.$bus.$emit("message:push","已全部刪除","danger")}))},useCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/coupon"),a={code:t.coupon_code};t.$http.post(e,{data:a}).then()},delReCart:function(t){var e=this;e.isLoading=!0,e.$http.all(e.totalShoppingList.carts.map((function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart/").concat(t.id);return e.$http.delete(a)}))).then((function(){e.isLoading=!1,t()}))}},beforeRouteLeave:function(t,e,a){this.delReCart(a)},created:function(){i()("body").css("overflow-y",""),this.getShoppingCartList()}},c=n,l=(a("e0b6"),a("2877")),u=Object(l["a"])(c,s,r,!1,null,"59252e40",null);e["default"]=u.exports},d81d:function(t,e,a){"use strict";var s=a("23e7"),r=a("b727").map,o=a("1dde");s({target:"Array",proto:!0,forced:!o("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,a){var s=a("da84"),r=a("fdbc"),o=a("e260"),i=a("9112"),n=a("b622"),c=n("iterator"),l=n("toStringTag"),u=o.values;for(var p in r){var d=s[p],f=d&&d.prototype;if(f){if(f[c]!==u)try{i(f,c,u)}catch(v){f[c]=u}if(f[l]||i(f,l,p),r[p])for(var m in o)if(f[m]!==o[m])try{i(f,m,o[m])}catch(v){f[m]=o[m]}}}},e0b6:function(t,e,a){"use strict";var s=a("5388"),r=a.n(s);r.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-6ddc82e4.d6a8c39b.js.map