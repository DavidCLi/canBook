(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39e0b08c"],{"13d5":function(t,a,s){"use strict";var o=s("23e7"),i=s("d58f").left,r=s("b301");o({target:"Array",proto:!0,forced:r("reduce")},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},8418:function(t,a,s){"use strict";var o=s("c04e"),i=s("9bf2"),r=s("5c6c");t.exports=function(t,a,s){var e=o(a);e in t?i.f(t,e,r(0,s)):t[e]=s}},"99af":function(t,a,s){"use strict";var o=s("23e7"),i=s("d039"),r=s("e8b5"),e=s("861d"),n=s("7b0b"),c=s("50c4"),d=s("8418"),p=s("65f0"),u=s("1dde"),l=s("b622"),h=l("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",v=!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),C=u("concat"),_=function(t){if(!e(t))return!1;var a=t[h];return void 0!==a?!!a:r(t)},m=!v||!C;o({target:"Array",proto:!0,forced:m},{concat:function(t){var a,s,o,i,r,e=n(this),u=p(e,0),l=0;for(a=-1,o=arguments.length;a<o;a++)if(r=-1===a?e:arguments[a],_(r)){if(i=c(r.length),l+i>f)throw TypeError(g);for(s=0;s<i;s++,l++)s in r&&d(u,l,r[s])}else{if(l>=f)throw TypeError(g);d(u,l++,r)}return u.length=l,u}})},a434:function(t,a,s){"use strict";var o=s("23e7"),i=s("23cb"),r=s("a691"),e=s("50c4"),n=s("7b0b"),c=s("65f0"),d=s("8418"),p=s("1dde"),u=Math.max,l=Math.min,h=9007199254740991,f="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p("splice")},{splice:function(t,a){var s,o,p,g,v,C,_=n(this),m=e(_.length),S=i(t,m),y=arguments.length;if(0===y?s=o=0:1===y?(s=0,o=m-S):(s=y-2,o=l(u(r(a),0),m-S)),m+s-o>h)throw TypeError(f);for(p=c(_,o),g=0;g<o;g++)v=S+g,v in _&&d(p,g,_[v]);if(p.length=o,s<o){for(g=S;g<m-o;g++)v=g+o,C=g+s,v in _?_[C]=_[v]:delete _[C];for(g=m;g>m-o+s;g--)delete _[g-1]}else if(s>o)for(g=m-o;g>S;g--)v=g+o-1,C=g+s-1,v in _?_[C]=_[v]:delete _[C];for(g=0;g<s;g++)_[g+S]=arguments[g+2];return _.length=m-o+s,p}})},b301:function(t,a,s){"use strict";var o=s("d039");t.exports=function(t,a){var s=[][t];return!s||!o((function(){s.call(null,a||function(){throw 1},1)}))}},c740:function(t,a,s){"use strict";var o=s("23e7"),i=s("b727").findIndex,r=s("44d2"),e="findIndex",n=!0;e in[]&&Array(1)[e]((function(){n=!1})),o({target:"Array",proto:!0,forced:n},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(e)},d58f:function(t,a,s){var o=s("1c0b"),i=s("7b0b"),r=s("44ad"),e=s("50c4"),n=function(t){return function(a,s,n,c){o(s);var d=i(a),p=r(d),u=e(d.length),l=t?u-1:0,h=t?-1:1;if(n<2)while(1){if(l in p){c=p[l],l+=h;break}if(l+=h,t?l<0:u<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:u>l;l+=h)l in p&&(c=s(c,p[l],l,d));return c}};t.exports={left:n(!1),right:n(!0)}},d81d:function(t,a,s){"use strict";var o=s("23e7"),i=s("b727").map,r=s("1dde");o({target:"Array",proto:!0,forced:!r("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},da97:function(t,a,s){"use strict";s.r(a);var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"row shopPaddingTop shopPaddingBottom"},[s("a",{staticClass:"backShop",on:{click:function(a){return a.preventDefault(),t.backPage(a)}}},[s("i",{staticClass:"fas fa-backward"}),t._v(" 返回商品區 ")])]),s("div",{staticClass:"row shopCheckBox"},[s("div",{staticClass:"col-5"},[s("img",{attrs:{src:t.productData.imageUrl,alt:""}})]),s("div",{staticClass:"col-7 productShop"},[s("div",{staticClass:"productShopTitle"},[s("span",[t._v(t._s(t.productData.category))]),s("h2",[t._v(t._s(t.productData.title))])]),s("div",{staticClass:"productShopContent"},[s("span",[t._v("【內容簡介】")]),s("p",[t._v(t._s(t.productData.description))])]),s("div",{staticClass:"productShopContent"},[s("span",[t._v("【作者介紹】")]),s("p",[t._v(t._s(t.productData.content))])]),s("div",{staticClass:"productShopPrice"},[t.productData.price!==t.productData.origin_price?s("strong",[t._v("NT$: "+t._s(t.productData.price))]):t._e(),t.productData.price===t.productData.origin_price?s("strong",[t._v("NT$: "+t._s(t.productData.origin_price))]):t._e(),t.productData.price!==t.productData.origin_price?s("p",[t._v("NT$: "+t._s(t.productData.origin_price))]):t._e()]),s("div",{staticClass:"productShopQuantity"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.productData.num,expression:"productData.num"}],on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.productData,"num",a.target.multiple?s:s[0])}}},t._l(10,(function(a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(a)+" "+t._s(t.productData.unit))])})),0),s("div",{staticClass:"productShopAdd"},[s("div",{staticClass:"input-group-append",on:{click:function(a){return a.preventDefault(),t.addToShopCart(t.productData,t.productData.num)}}},[s("button",{staticClass:"btn",attrs:{type:"button"}},[t._v("加入購物車")])])]),s("p",[t._v(" 總共: "),s("strong",[t._v("NT$ "+t._s(t.productData.num*t.productData.price)+" 元")])])])]),t.shopCartList.carts.length>0?s("div",{staticClass:"shoppingSideBar"},[s("div",{staticClass:"shoppingSideBarTitle"},[s("span",[t._v("購物車內容")]),s("i",{staticClass:"fas fa-times",on:{click:t.sideBarClose}})]),s("div",{staticClass:"shoppingSideBarContent"},[t._l(t.shopCartList.carts,(function(a,o){return s("div",{key:o,staticClass:"shoppingSideBarList"},[s("span",{staticClass:"shoppingSideBarDataDel",on:{click:function(a){return a.preventDefault(),t.delShopingCartList(o)}}},[t._v("X")]),s("img",{attrs:{src:a.product.imageUrl,alt:""}}),s("div",{staticClass:"shoppingSideBarData"},[s("p",[t._v(t._s(a.product.title))]),s("span",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),s("span",[t._v("NT"+t._s(t._f("currency")(a.product.price*a.qty)))])])])})),s("div",{staticClass:"shoppingSideBarTotal"},[s("p",[t._v("小計: NT"+t._s(t._f("currency")(t.total)))]),s("button",{staticClass:"delAllBtn",on:{click:function(a){return a.preventDefault(),t.delAllShoppingCartList(a)}}},[t._v("清除購物車")])])],2),s("button",{staticClass:"shoppingSideBarGetOrderBtn btn",on:{click:function(a){return a.preventDefault(),t.postCart(a)}}},[t._v(" 下單去 "),s("i",{staticClass:"fas fa-arrow-right"})])]):s("div",{staticClass:"shoppingSideBar"},[s("div",{staticClass:"shoppingSideBarTitle"},[s("span",[t._v("購物車內容")]),s("i",{staticClass:"fas fa-times",on:{click:t.sideBarClose}})]),s("div",{staticClass:"shoppingSideBarZero"},[t._v("購物車目前是空的! 快去商場逛逛吧~")])]),s("div",{staticClass:"shoppingCartIcon",on:{click:t.sideBarOpen}},[s("i",{staticClass:"fas fa-shopping-cart"}),t.shopCartList.carts.length>0?s("div",{staticClass:"shoppingCartQty"},[t._v(t._s(t.shopCartList.carts.length))]):t._e()])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col relatedBox"},[s("h2",{staticClass:"relatedProductsTitle"},[t._v("相關產品")]),t._l(t.relatedProducts.slice(0,3),(function(a,o){return s("div",{key:o,staticClass:"relatedProductsContent col-4",on:{click:function(s){return s.preventDefault(),t.seeRelatedProducts(a.id)}}},[s("img",{attrs:{src:a.imageUrl,alt:""}}),s("p",[t._v(t._s(a.title))]),s("span",[t._v("NT$ "+t._s(a.price))])])}))],2)])],1)},i=[],r=(s("99af"),s("4de4"),s("c740"),s("d81d"),s("13d5"),s("a434"),s("1157")),e=s.n(r),n={data:function(){return{shopId:"",productData:{},shopCartList:{carts:{}},isLoading:!1,coupon_code:"",totalShoppingList:{},totalProducts:{},relatedProducts:{},relatedProductId:""}},computed:{total:function(){return sessionStorage.setItem("cart",JSON.stringify(this.shopCartList.carts)),this.shopCartList.carts.reduce((function(t,a){return t+a.product.price*a.qty}),0)}},methods:{getShopData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/product/").concat(t.shopId);t.isLoading=!0,t.$http.get(a).then((function(a){a.data.product.num=1,t.productData=a.data.product,t.getRealtedProduct(),t.isLoading=!1}))},addToShopCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this;s.isLoading=!0;var o={product:t,qty:a},i=s.shopCartList.carts.findIndex((function(a){return a.product.id===t.id}));-1===i?s.shopCartList.carts.push(o):s.shopCartList.carts[i].qty+=a,sessionStorage.setItem("cart",JSON.stringify(s.shopCartList.carts)),s.isLoading=!1,s.$bus.$emit("message:push","加入成功","success")},getShopCartContent:function(){var t=this;t.shopCartList.carts=JSON.parse(sessionStorage.getItem("cart"))||[]},delShopingCartList:function(t){var a=this;a.isLoading=!0,a.shopCartList.carts.splice(t,1),sessionStorage.setItem("cart",JSON.stringify(a.shopCartList.carts)),a.isLoading=!1,a.$bus.$emit("message:push","刪除成功","danger")},postCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/cart");t.isLoading=!0,t.$http.all(t.shopCartList.carts.map((function(s){var o={product_id:s.product.id,qty:s.qty};return t.$http.post(a,{data:o})}))).then((function(){t.isLoading=!1,t.$router.push("/cart")}))},useCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/coupon"),s={code:t.coupon_code};t.isLoading=!0,t.$http.post(a,{data:s}).then((function(){t.isLoading=!1}))},backPage:function(){this.$router.push("/shop")},delAllShoppingCartList:function(){this.shopCartList.carts=[],sessionStorage.setItem("cart",JSON.stringify(this.shopCartList.carts))},sideBarOpen:function(){e()(".shoppingSideBar").css({display:"inline-block"}).animate({right:"0%"},100),e()("body").css("overflow-y","hidden")},sideBarClose:function(){e()(".shoppingSideBar").css({display:"none"}),e()("body").css("overflow-y","")},getRealtedProduct:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/products/all");t.$http.get(a).then((function(a){t.totalProducts=a.data.products,t.relatedProducts=t.totalProducts.filter((function(a){return a.category===t.productData.category&&a.title!==t.productData.title}))}))},seeRelatedProducts:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("canbook","/product/").concat(t),s=this;s.isLoading=!0,s.shopId=t,s.$http.get(a).then((function(t){t.data.success&&(s.$router.push("".concat(s.shopId)),s.getShopData(),s.relatedProducts={},s.getRealtedProduct()),s.isLoading=!1}))}},created:function(){this.shopId=this.$route.params.shopId,this.getShopData(),this.getShopCartContent()}},c=n,d=s("2877"),p=Object(d["a"])(c,o,i,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-39e0b08c.a06f2391.js.map